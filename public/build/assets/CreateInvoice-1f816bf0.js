import{m as N,J as E,v as F,s as D,f as _,a,u as n,w as v,F as b,x as K,o as m,X as O,b as t,e as j,i as d,p as A,y as x,d as h,q as c,t as i,l as G}from"./app-85424c00.js";import{_ as Q}from"./AuthenticatedLayout-7b52ae94.js";import{_ as u}from"./InputError-3f29dc8e.js";import{_ as W}from"./PrimaryButton-2a347243.js";import{_ as J}from"./DangerButton-7bfb710f.js";import L from"./CreateEdit-1b12f7bc.js";import"./SecondaryButton-427d4873.js";import"./SuccessButton-e8fc0585.js";const X={class:"page-wrapper"},Y={class:"page-content"},z=t("div",{class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},[t("div",{class:"breadcrumb-title pe-3"},"Invoice Management"),t("div",{class:"ps-3"},[t("nav",{"aria-label":"breadcrumb"},[t("ol",{class:"breadcrumb mb-0 p-0"},[t("li",{class:"breadcrumb-item"},[t("a",{href:"javascript:;"},[t("i",{class:"bx bx-home-alt"})])]),t("li",{class:"breadcrumb-item active","aria-current":"page"},"Invoice Create")])])]),t("div",{class:"ms-auto"})],-1),H={class:"card"},Z={class:"card-body"},tt={class:"invoice overflow-auto"},st={class:"row mb-3"},et={class:"col-md-4"},ot=t("h6",null,"Company ",-1),lt=t("hr",null,null,-1),nt={class:"row g-2"},at={class:"col-md-12"},rt=t("label",{for:"input13",class:"form-label"},"Account Number",-1),dt=["value"],it={class:"col-md-4"},ct=t("h6",null,"Shipper ",-1),ut=t("hr",null,null,-1),_t={class:"row g-2"},mt={class:"col-md-12"},pt={for:"input13",class:"form-label"},ht=t("i",{class:"bx bx-edit"},null,-1),ft=[ht],bt=["value"],gt={class:"col-md-4"},yt=t("h6",null,"Consignee ",-1),vt=t("hr",null,null,-1),xt={class:"row g-2"},wt={class:"col-md-12"},Ut={for:"input13",class:"form-label"},Ct=t("i",{class:"bx bx-edit"},null,-1),Vt=[Ct],At=["value"],$t={class:"row g-2 mb-3"},It=t("h6",null,"Invoice",-1),Tt=t("hr",null,null,-1),kt={class:"col-md-3"},St=t("label",{for:"input13",class:"form-label"},"Carrier",-1),qt={class:"col-md-3"},Nt=t("label",{for:"input13",class:"form-label"},"MAWB No",-1),Et={class:"col-md-3"},Kt=t("label",{for:"input13",class:"form-label"},"Port of Departure",-1),Lt={class:"col-md-3"},Mt=t("label",{for:"input13",class:"form-label"},"Port of Landing",-1),Pt={class:"col-md-3"},Rt=t("label",{for:"input13",class:"form-label"},"Quantity",-1),Bt={class:"col-md-3"},Ft=t("label",{for:"input13",class:"form-label"},"Weight",-1),Dt={class:"col-md-3"},Ot=t("label",{for:"input13",class:"form-label"},"Commodity",-1),jt=t("i",{class:"bx bx-plus"},null,-1),Gt=t("th",{class:"text-left",colspan:"3"},"PARTICULARS",-1),Qt=t("th",{class:"text-left"},"UNIT PRICE",-1),Wt=t("th",{class:"text-left"},"QUANTITY",-1),Jt=t("th",{class:"text-left"},"TOTAL",-1),Xt={class:"no"},Yt=["onClick"],zt=t("i",{class:"bx bxs-trash"},null,-1),Ht=[zt],Zt={class:"text-left",colspan:"3"},ts=["onUpdate:modelValue"],ss={class:"text-left"},es=["onUpdate:modelValue","onKeyup"],os={class:"text-left"},ls=["onUpdate:modelValue","onKeyup"],ns={class:"total"},as=t("td",{colspan:"4"},null,-1),rs=t("td",{colspan:"2"},"SUBTOTAL",-1),ds=t("td",{colspan:"4"},null,-1),is=t("td",{colspan:"2"},"GRAND TOTAL",-1),cs={class:"card-footer"},us={class:"flex items-center gap-2 mt-2"},vs={__name:"CreateInvoice",props:{invoice:Object,shippers:Array,consignees:Array,companies:Array,roles:Array,edit_mode:Boolean},setup(f){const M=N(!1),o=E().props.invoice,g=E().props.edit_mode;var w="",U="";const e=F({invoice_id:o==null?void 0:o.id,company_id:o==null?void 0:o.company_id,shipper_id:o==null?void 0:o.shipper_id,shipper_address:o==null?void 0:o.shipper_address,consignee_id:o==null?void 0:o.consignee_id,consignee_address:o==null?void 0:o.consignee_address,carrier:o==null?void 0:o.carrier,mawb_no:o==null?void 0:o.mawb_no,commodity:o==null?void 0:o.commodity,quantity:o==null?void 0:o.quantity,weight:o==null?void 0:o.weight,sender:o==null?void 0:o.sender,destination:o==null?void 0:o.destination,subtotal:0,total:0,items:o==null?void 0:o.items}),P=()=>{e.items.push({particular:"",amount:0,qty:1,total:0})},R=()=>{g?e.post(route("invoice.update"),{preserveScroll:!0,onSuccess:()=>I(),onError:()=>$(),onFinish:()=>{}}):e.post(route("invoice.store"),{preserveScroll:!0,onSuccess:()=>I(),onError:()=>$(),onFinish:()=>{}})},$=()=>{},I=()=>{M.value=!1,e.reset()},B=r=>{e.items.splice(r,1),C()},C=()=>{e.subtotal=0,e.items.forEach(r=>{e.subtotal+=parseFloat(r.total)}),e.total=e.subtotal},T=r=>{const l=e.items[r],s=l.qty*l.amount;l.total=s,C()},k=r=>{K.get(`/users/fetch/shipper/${r}`).then(({data:l})=>{w=l.selected_shipper,console.log(w)})},S=r=>{K.get(`/users/fetch/consignee/${r}`).then(({data:l})=>{U=l.selected_consignee,console.log(U)})},V=N(null),q=r=>{V.value.edit(r)};return D(()=>{g||(e.items=[{particular:"",amount:0,qty:1,total:0}]),g&&C(),k(e.shipper_id),S(e.consignee_id)}),(r,l)=>(m(),_(b,null,[a(n(O),{title:"Invoices"}),a(Q,null,{default:v(()=>[t("div",X,[t("div",Y,[z,t("div",H,[t("form",{onSubmit:l[16]||(l[16]=j(s=>R(),["prevent"]))},[t("div",Z,[t("div",tt,[t("div",st,[t("div",et,[ot,lt,t("div",nt,[t("div",at,[rt,d(t("select",{class:"form-control","onUpdate:modelValue":l[0]||(l[0]=s=>n(e).company_id=s),onChange:l[1]||(l[1]=s=>r.fetchAddress("company"))},[(m(!0),_(b,null,x(f.companies,s=>(m(),_("option",{key:s.id,value:s.id},i(s.id)+" - "+i(s.name),9,dt))),128))],544),[[A,n(e).company_id]]),a(u,{message:n(e).errors.company_id},null,8,["message"])])])]),t("div",it,[ct,ut,t("div",_t,[t("div",mt,[t("label",pt,[h("Account Number "),a(L,{roles:f.roles,ref_key:"create_edit_ref",ref:V},null,8,["roles"]),t("button",{type:"button",onClick:l[2]||(l[2]=s=>q(n(w))),title:"Edit",clas:"btn btn-primary"},ft)]),d(t("select",{class:"form-control","onUpdate:modelValue":l[3]||(l[3]=s=>n(e).shipper_id=s),onChange:l[4]||(l[4]=s=>k(n(e).shipper_id))},[(m(!0),_(b,null,x(f.shippers,s=>(m(),_("option",{key:s.id,value:s.id},i(s.id)+" - "+i(s.name),9,bt))),128))],544),[[A,n(e).shipper_id]]),a(u,{message:n(e).errors.shipper_id},null,8,["message"])])])]),t("div",gt,[yt,vt,t("div",xt,[t("div",wt,[t("label",Ut,[h("Account Number "),a(L,{roles:f.roles,ref_key:"create_edit_ref",ref:V},null,8,["roles"]),t("button",{type:"button",onClick:l[5]||(l[5]=s=>q(n(U))),title:"Edit",clas:"btn btn-primary"},Vt)]),d(t("select",{class:"form-control","onUpdate:modelValue":l[6]||(l[6]=s=>n(e).consignee_id=s),onChange:l[7]||(l[7]=s=>S(n(e).consignee_id))},[(m(!0),_(b,null,x(f.consignees,s=>(m(),_("option",{key:s.id,value:s.id},i(s.id)+" - "+i(s.name),9,At))),128))],544),[[A,n(e).consignee_id]]),a(u,{message:n(e).errors.consignee_id},null,8,["message"])])])])]),t("div",$t,[It,Tt,t("div",kt,[St,d(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[8]||(l[8]=s=>n(e).carrier=s)},null,512),[[c,n(e).carrier]]),a(u,{message:n(e).errors.carrier},null,8,["message"])]),t("div",qt,[Nt,d(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[9]||(l[9]=s=>n(e).mawb_no=s)},null,512),[[c,n(e).mawb_no]]),a(u,{message:n(e).errors.mawb_no},null,8,["message"])]),t("div",Et,[Kt,d(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[10]||(l[10]=s=>n(e).sender=s)},null,512),[[c,n(e).sender]]),a(u,{message:n(e).errors.sender},null,8,["message"])]),t("div",Lt,[Mt,d(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[11]||(l[11]=s=>n(e).destination=s)},null,512),[[c,n(e).destination]]),a(u,{message:n(e).errors.destination},null,8,["message"])]),t("div",Pt,[Rt,d(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[12]||(l[12]=s=>n(e).quantity=s)},null,512),[[c,n(e).quantity]]),a(u,{message:n(e).errors.quantity},null,8,["message"])]),t("div",Bt,[Ft,d(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[13]||(l[13]=s=>n(e).weight=s)},null,512),[[c,n(e).weight]]),a(u,{message:n(e).errors.weight},null,8,["message"])]),t("div",Dt,[Ot,d(t("input",{type:"text",class:"form-control","onUpdate:modelValue":l[14]||(l[14]=s=>n(e).commodity=s)},null,512),[[c,n(e).commodity]]),a(u,{message:n(e).errors.commodity},null,8,["message"])])]),t("table",null,[t("thead",null,[t("tr",null,[t("th",null,[t("button",{type:"button",onClick:l[15]||(l[15]=s=>P()),class:"ms-1 text-sucess btn btn-success btn-sm"},[jt,h("Add Item")])]),Gt,Qt,Wt,Jt])]),t("tbody",null,[(m(!0),_(b,null,x(n(e).items,(s,y)=>(m(),_("tr",{key:s.id},[t("td",Xt,[t("span",null,[h(" Item #"+i(y)+" ",1),t("button",{type:"button",onClick:p=>B(y),class:"ms-1 text-danger"},Ht,8,Yt)])]),t("td",Zt,[d(t("input",{type:"text",class:"form-control","onUpdate:modelValue":p=>s.particular=p},null,8,ts),[[c,s.particular]])]),t("td",ss,[d(t("input",{type:"number",class:"form-control","onUpdate:modelValue":p=>s.amount=p,onKeyup:p=>T(y)},null,40,es),[[c,s.amount]])]),t("td",os,[d(t("input",{type:"number",class:"form-control","onUpdate:modelValue":p=>s.qty=p,onKeyup:p=>T(y)},null,40,ls),[[c,s.qty]])]),t("td",ns,"PKR "+i(s.total),1)]))),128))]),t("tfoot",null,[t("tr",null,[as,rs,t("td",null,"PKR "+i(n(e).subtotal),1)]),t("tr",null,[ds,is,t("td",null,"PKR "+i(n(e).total),1)])])])])]),t("div",cs,[t("div",us,[a(W,{disabled:n(e).processing},{default:v(()=>[h(i(n(g)?"Update":"Save"),1)]),_:1},8,["disabled"]),a(n(G),{href:r.route("invoice.index")},{default:v(()=>[a(J,{disabled:n(e).processing},{default:v(()=>[h(" Cancel ")]),_:1},8,["disabled"])]),_:1},8,["href"])])])],32)])])])]),_:1})],64))}};export{vs as default};
