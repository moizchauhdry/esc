import{m as M,J as S,v as $,p as P,f as p,a,u as o,w as v,F as b,o as f,X as R,b as s,e as B,i as r,q as V,s as y,d as h,x as i,t as u,l as E}from"./app-a5f84b07.js";import{_ as F}from"./AuthenticatedLayout-cfb44743.js";import{_ as c}from"./InputError-63b76e4f.js";import{_ as O}from"./PrimaryButton-79770f62.js";import{_ as D}from"./DangerButton-2a7a424b.js";import N from"./Address-8dd7f92d.js";import"./SecondaryButton-7dafa517.js";import"./SuccessButton-4dd4fe7f.js";const j={class:"page-wrapper"},G={class:"page-content"},Q=s("div",{class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},[s("div",{class:"breadcrumb-title pe-3"},"Invoice Management"),s("div",{class:"ps-3"},[s("nav",{"aria-label":"breadcrumb"},[s("ol",{class:"breadcrumb mb-0 p-0"},[s("li",{class:"breadcrumb-item"},[s("a",{href:"javascript:;"},[s("i",{class:"bx bx-home-alt"})])]),s("li",{class:"breadcrumb-item active","aria-current":"page"},"Invoice Create")])])]),s("div",{class:"ms-auto"})],-1),W={class:"card"},J={class:"card-body"},X={class:"invoice overflow-auto"},Y={class:"row mb-3"},z={class:"col-md-4"},H=s("h6",null,"Company ",-1),Z=s("hr",null,null,-1),ss={class:"row g-2"},es={class:"col-md-12"},ts=s("label",{for:"input13",class:"form-label"},"Account Number",-1),os=["value"],ls={class:"col-md-4"},ns=s("h6",null,"Shipper ",-1),as=s("hr",null,null,-1),ds={class:"row g-2"},rs={class:"col-md-12"},is={for:"input13",class:"form-label"},cs=["value"],us={class:"col-md-12"},ms=s("label",{for:"input11",class:"form-label"},"Name & Address",-1),_s={class:"col-md-4"},ps=s("h6",null,"Consignee ",-1),fs=s("hr",null,null,-1),hs={class:"row g-2"},bs={class:"col-md-12"},gs={for:"input13",class:"form-label"},vs=["value"],ys={class:"col-md-12"},xs=s("label",{for:"input13",class:"form-label"},"Name & Address",-1),ws={class:"row g-2 mb-3"},Us=s("h6",null,"Invoice",-1),Vs=s("hr",null,null,-1),As={class:"col-md-3"},Cs=s("label",{for:"input13",class:"form-label"},"Carrier",-1),Is={class:"col-md-3"},Ts=s("label",{for:"input13",class:"form-label"},"MAWB No",-1),Ss={class:"col-md-3"},$s=s("label",{for:"input13",class:"form-label"},"Port of Departure",-1),Ns={class:"col-md-3"},qs=s("label",{for:"input13",class:"form-label"},"Port of Landing",-1),ks={class:"col-md-3"},Ks=s("label",{for:"input13",class:"form-label"},"Quantity",-1),Ls={class:"col-md-3"},Ms=s("label",{for:"input13",class:"form-label"},"Weight",-1),Ps={class:"col-md-3"},Rs=s("label",{for:"input13",class:"form-label"},"Commodity",-1),Bs=s("i",{class:"bx bx-plus"},null,-1),Es=s("th",{class:"text-left",colspan:"3"},"PARTICULARS",-1),Fs=s("th",{class:"text-left"},"UNIT PRICE",-1),Os=s("th",{class:"text-left"},"QUANTITY",-1),Ds=s("th",{class:"text-left"},"TOTAL",-1),js={class:"no"},Gs=["onClick"],Qs=s("i",{class:"bx bxs-trash"},null,-1),Ws=[Qs],Js={class:"text-left",colspan:"3"},Xs=["onUpdate:modelValue"],Ys={class:"text-left"},zs=["onUpdate:modelValue","onKeyup"],Hs={class:"text-left"},Zs=["onUpdate:modelValue","onKeyup"],se={class:"total"},ee=s("td",{colspan:"4"},null,-1),te=s("td",{colspan:"2"},"SUBTOTAL",-1),oe=s("td",{colspan:"4"},null,-1),le=s("td",{colspan:"2"},"GRAND TOTAL",-1),ne={class:"card-footer"},ae={class:"flex items-center gap-2 mt-2"},fe={__name:"CreateInvoice",props:{invoice:Object,address:Object,shippers:Array,consignees:Array,companies:Array,edit_mode:Boolean},setup(x){const q=M(!1),l=S().props.invoice,g=S().props.edit_mode,e=$({invoice_id:l==null?void 0:l.id,company_id:l==null?void 0:l.company_id,shipper_id:l==null?void 0:l.shipper_id,shipper_address:l==null?void 0:l.shipper_address,consignee_id:l==null?void 0:l.consignee_id,consignee_address:l==null?void 0:l.consignee_address,carrier:l==null?void 0:l.carrier,mawb_no:l==null?void 0:l.mawb_no,commodity:l==null?void 0:l.commodity,quantity:l==null?void 0:l.quantity,weight:l==null?void 0:l.weight,sender:l==null?void 0:l.sender,destination:l==null?void 0:l.destination,subtotal:0,total:0,items:l==null?void 0:l.items}),k=()=>{e.items.push({particular:"",amount:0,qty:1,total:0})},K=()=>{g?e.post(route("invoice.update"),{preserveScroll:!0,onSuccess:()=>C(),onError:()=>A(),onFinish:()=>{}}):e.post(route("invoice.store"),{preserveScroll:!0,onSuccess:()=>C(),onError:()=>A(),onFinish:()=>{}})},A=()=>{},C=()=>{q.value=!1,e.reset()},L=m=>{e.items.splice(m,1),w()},w=()=>{e.subtotal=0,e.items.forEach(m=>{e.subtotal+=parseFloat(m.total)}),e.total=e.subtotal},I=m=>{const n=e.items[m],t=n.qty*n.amount;n.total=t,w()},U=m=>{var n=0;m=="shipper"&&(n=e.shipper_id),m=="consignee"&&(n=e.consignee_id),$({id:n}).post(route("address.fetch"),{preserveScroll:!0,onSuccess:_=>{var d=_.props.address;console.log(_);var T=d.name+`
`+d.address_1+", "+d.address_2+`
`+d.city+", "+d.state+", "+d.country;d.type=="shipper"&&(e.shipper_address=T),d.type=="consignee"&&(e.consignee_address=T)},onError:_=>{console.log(_)},onFinish:()=>{}})};return P(()=>{g||(e.items=[{particular:"",amount:0,qty:1,total:0}]),g&&w()}),(m,n)=>(f(),p(b,null,[a(o(R),{title:"Invoices"}),a(F,null,{default:v(()=>[s("div",j,[s("div",G,[Q,s("div",W,[s("form",{onSubmit:n[16]||(n[16]=B(t=>K(),["prevent"]))},[s("div",J,[s("div",X,[s("div",Y,[s("div",z,[H,Z,s("div",ss,[s("div",es,[ts,r(s("select",{class:"form-control","onUpdate:modelValue":n[0]||(n[0]=t=>o(e).company_id=t),onChange:n[1]||(n[1]=t=>U("company"))},[(f(!0),p(b,null,y(x.companies,t=>(f(),p("option",{key:t.id,value:t.id},u(t.id)+" - "+u(t.name),9,os))),128))],544),[[V,o(e).company_id]]),a(c,{message:o(e).errors.company_id},null,8,["message"])])])]),s("div",ls,[ns,as,s("div",ds,[s("div",rs,[s("label",is,[h("Account Number "),a(N)]),r(s("select",{class:"form-control","onUpdate:modelValue":n[2]||(n[2]=t=>o(e).shipper_id=t),onChange:n[3]||(n[3]=t=>U("shipper"))},[(f(!0),p(b,null,y(x.shippers,t=>(f(),p("option",{key:t.id,value:t.id},u(t.id)+" - "+u(t.name),9,cs))),128))],544),[[V,o(e).shipper_id]]),a(c,{message:o(e).errors.shipper_id},null,8,["message"])]),s("div",us,[ms,r(s("textarea",{class:"form-control","onUpdate:modelValue":n[4]||(n[4]=t=>o(e).shipper_address=t),rows:"3",disabled:""},null,512),[[i,o(e).shipper_address]]),a(c,{message:o(e).errors.shipper_address},null,8,["message"])])])]),s("div",_s,[ps,fs,s("div",hs,[s("div",bs,[s("label",gs,[h("Account Number "),a(N)]),r(s("select",{class:"form-control","onUpdate:modelValue":n[5]||(n[5]=t=>o(e).consignee_id=t),onChange:n[6]||(n[6]=t=>U("consignee"))},[(f(!0),p(b,null,y(x.consignees,t=>(f(),p("option",{key:t.id,value:t.id},u(t.id)+" - "+u(t.name),9,vs))),128))],544),[[V,o(e).consignee_id]]),a(c,{message:o(e).errors.consignee_id},null,8,["message"])]),s("div",ys,[xs,r(s("textarea",{class:"form-control","onUpdate:modelValue":n[7]||(n[7]=t=>o(e).consignee_address=t),rows:"3",disabled:""},null,512),[[i,o(e).consignee_address]]),a(c,{message:o(e).errors.consignee_address},null,8,["message"])])])])]),s("div",ws,[Us,Vs,s("div",As,[Cs,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[8]||(n[8]=t=>o(e).carrier=t)},null,512),[[i,o(e).carrier]]),a(c,{message:o(e).errors.carrier},null,8,["message"])]),s("div",Is,[Ts,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[9]||(n[9]=t=>o(e).mawb_no=t)},null,512),[[i,o(e).mawb_no]]),a(c,{message:o(e).errors.mawb_no},null,8,["message"])]),s("div",Ss,[$s,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[10]||(n[10]=t=>o(e).sender=t)},null,512),[[i,o(e).sender]]),a(c,{message:o(e).errors.sender},null,8,["message"])]),s("div",Ns,[qs,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[11]||(n[11]=t=>o(e).destination=t)},null,512),[[i,o(e).destination]]),a(c,{message:o(e).errors.destination},null,8,["message"])]),s("div",ks,[Ks,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[12]||(n[12]=t=>o(e).quantity=t)},null,512),[[i,o(e).quantity]]),a(c,{message:o(e).errors.quantity},null,8,["message"])]),s("div",Ls,[Ms,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[13]||(n[13]=t=>o(e).weight=t)},null,512),[[i,o(e).weight]]),a(c,{message:o(e).errors.weight},null,8,["message"])]),s("div",Ps,[Rs,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[14]||(n[14]=t=>o(e).commodity=t)},null,512),[[i,o(e).commodity]]),a(c,{message:o(e).errors.commodity},null,8,["message"])])]),s("table",null,[s("thead",null,[s("tr",null,[s("th",null,[s("button",{type:"button",onClick:n[15]||(n[15]=t=>k()),class:"ms-1 text-sucess btn btn-success btn-sm"},[Bs,h("Add Item")])]),Es,Fs,Os,Ds])]),s("tbody",null,[(f(!0),p(b,null,y(o(e).items,(t,_)=>(f(),p("tr",{key:t.id},[s("td",js,[s("span",null,[h(" Item #"+u(_)+" ",1),s("button",{type:"button",onClick:d=>L(_),class:"ms-1 text-danger"},Ws,8,Gs)])]),s("td",Js,[r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":d=>t.particular=d},null,8,Xs),[[i,t.particular]])]),s("td",Ys,[r(s("input",{type:"number",class:"form-control","onUpdate:modelValue":d=>t.amount=d,onKeyup:d=>I(_)},null,40,zs),[[i,t.amount]])]),s("td",Hs,[r(s("input",{type:"number",class:"form-control","onUpdate:modelValue":d=>t.qty=d,onKeyup:d=>I(_)},null,40,Zs),[[i,t.qty]])]),s("td",se,"PKR "+u(t.total),1)]))),128))]),s("tfoot",null,[s("tr",null,[ee,te,s("td",null,"PKR "+u(o(e).subtotal),1)]),s("tr",null,[oe,le,s("td",null,"PKR "+u(o(e).total),1)])])])])]),s("div",ne,[s("div",ae,[a(O,{disabled:o(e).processing},{default:v(()=>[h(u(o(g)?"Update":"Save"),1)]),_:1},8,["disabled"]),a(o(E),{href:m.route("invoice.index")},{default:v(()=>[a(D,{disabled:o(e).processing},{default:v(()=>[h(" Cancel ")]),_:1},8,["disabled"])]),_:1},8,["href"])])])],32)])])])]),_:1})],64))}};export{fe as default};
