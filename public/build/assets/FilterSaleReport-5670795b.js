import{p as S,J as b,v as N,x as U,f as d,a as t,w as m,F as p,o as n,d as v,b as o,i as V,q as C,u as s,z as D,t as w,n as Y,e as A}from"./app-bf1bd45c.js";import{_ as B,a as J}from"./SecondaryButton-b2f7a764.js";import{_ as R}from"./PrimaryButton-c37f647a.js";import{_ as q}from"./SuccessButton-83acf835.js";import{_ as c}from"./InputLabel-9d02ea03.js";import{_}from"./InputError-31e867c5.js";import{Z as x}from"./main-5cacb5d5.js";import{h as z}from"./moment-a9aaa855.js";const E={class:"p-6"},I=o("h2",{class:"text-lg font-medium text-gray-900"},"Search Report",-1),L=o("hr",null,null,-1),O={class:"mt-6"},P={class:"row g-2"},T={class:"col-md-6"},Z=o("option",{value:""},"All Companies",-1),j=["value"],W={class:"col-md-6"},G=o("option",{value:""},"All Carriers",-1),H=["value"],K={class:"col-md-3"},Q={class:"col-md-3"},X={class:"mt-6 flex justify-end"},ne={__name:"FilterSaleReport",props:{companies:Array},setup(ee){const f=S(!1),g=S(!1),$=b().props.carriers,k=b().props.companies;var l="";const e=N({company_id:"",carrier_id:"",from_date:"",to_date:""}),F=()=>{f.value=!0,g.value=!1,l=localStorage.getItem("filters"),l&&(l=JSON.parse(l),e.company_id=l.company_id,e.carrier_id=l.carrier_id,e.from_date=l.from_date,e.to_date=l.to_date)},M=()=>{var i={company_id:e.company_id,carrier_id:e.carrier_id,from_date:e.from_date,to_date:e.to_date};const r=new URLSearchParams(i).toString(),a=`${route("report.sale.index")}?${r}`;e.post(a,{preserveScroll:!0,onSuccess:y=>{u(),localStorage.setItem("filters",JSON.stringify(i))},onError:y=>{console.log(y)},onFinish:()=>{}})},u=()=>{f.value=!1,e.reset()},h=i=>z(i).format("YYYY-MM-DD");return U(()=>{e.from_date&&(e.from_date=h(e.from_date)),e.to_date&&(e.to_date=h(e.to_date))}),(i,r)=>(n(),d(p,null,[t(R,{onClick:F,type:"button",class:"mx-1"},{default:m(()=>[v("Search")]),_:1}),t(B,{show:f.value,onClose:u},{default:m(()=>[o("form",{onSubmit:r[4]||(r[4]=A(a=>g.value?i.update():M(),["prevent"]))},[o("div",E,[I,L,o("div",O,[o("div",P,[o("div",T,[t(c,{for:"",value:"Companies",class:"mb-1"}),V(o("select",{"onUpdate:modelValue":r[0]||(r[0]=a=>s(e).company_id=a),class:"form-control"},[Z,(n(!0),d(p,null,D(s(k),a=>(n(),d("option",{value:a.id},w(a.name),9,j))),256))],512),[[C,s(e).company_id]]),t(_,{message:s(e).errors.company_id},null,8,["message"])]),o("div",W,[t(c,{for:"",value:"Carrier",class:"mb-1"}),V(o("select",{"onUpdate:modelValue":r[1]||(r[1]=a=>s(e).carrier_id=a),class:"form-control"},[G,(n(!0),d(p,null,D(s($),a=>(n(),d("option",{value:a.value},w(a.label),9,H))),256))],512),[[C,s(e).carrier_id]]),t(_,{message:s(e).errors.carrier_id},null,8,["message"])]),o("div",K,[t(c,{for:"",value:"From Date",class:"mb-1"}),t(s(x),{modelValue:s(e).from_date,"onUpdate:modelValue":r[2]||(r[2]=a=>s(e).from_date=a),teleport:!0,"enable-time-picker":!1},null,8,["modelValue"]),t(_,{message:s(e).errors.from_date},null,8,["message"])]),o("div",Q,[t(c,{for:"",value:"To Date",class:"mb-1"}),t(s(x),{modelValue:s(e).to_date,"onUpdate:modelValue":r[3]||(r[3]=a=>s(e).to_date=a),teleport:!0,"enable-time-picker":!1},null,8,["modelValue"]),t(_,{message:s(e).errors.to_date},null,8,["message"])])])]),o("div",X,[t(J,{onClick:u},{default:m(()=>[v(" Cancel ")]),_:1}),t(q,{class:Y(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing},{default:m(()=>[v(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{ne as default};
