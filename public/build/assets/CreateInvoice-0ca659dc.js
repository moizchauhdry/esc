import{m as $,J as N,v as k,s as R,f as p,a,u as o,w as y,F as g,o as f,X as B,b as s,e as E,i as d,p as V,x,d as h,q as c,t as m,l as F}from"./app-f9a4442b.js";import{_ as O}from"./AuthenticatedLayout-3f6734d3.js";import{_ as u}from"./InputError-a26a38cb.js";import{_ as D}from"./PrimaryButton-5d531543.js";import{_ as j}from"./DangerButton-17fa60ea.js";import q from"./CreateEdit-121fd1d3.js";import"./SecondaryButton-4f9c3ff1.js";import"./SuccessButton-3a684469.js";const G={class:"page-wrapper"},Q={class:"page-content"},W=s("div",{class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},[s("div",{class:"breadcrumb-title pe-3"},"Invoice Management"),s("div",{class:"ps-3"},[s("nav",{"aria-label":"breadcrumb"},[s("ol",{class:"breadcrumb mb-0 p-0"},[s("li",{class:"breadcrumb-item"},[s("a",{href:"javascript:;"},[s("i",{class:"bx bx-home-alt"})])]),s("li",{class:"breadcrumb-item active","aria-current":"page"},"Invoice Create")])])]),s("div",{class:"ms-auto"})],-1),J={class:"card"},X={class:"card-body"},Y={class:"invoice overflow-auto"},z={class:"row mb-3"},H={class:"col-md-4"},Z=s("h6",null,"Company ",-1),ss=s("hr",null,null,-1),es={class:"row g-2"},ts={class:"col-md-12"},os=s("label",{for:"input13",class:"form-label"},"Account Number",-1),ls=["value"],ns={class:"col-md-4"},as=s("h6",null,"Shipper ",-1),rs=s("hr",null,null,-1),ds={class:"row g-2"},is={class:"col-md-12"},cs={for:"input13",class:"form-label"},us=["value"],ms={class:"col-md-12"},_s=s("label",{for:"input11",class:"form-label"},"Name & Address ",-1),ps={class:"col-md-4"},fs=s("h6",null,"Consignee ",-1),hs=s("hr",null,null,-1),bs={class:"row g-2"},gs={class:"col-md-12"},vs={for:"input13",class:"form-label"},ys=["value"],xs={class:"col-md-12"},ws=s("label",{for:"input13",class:"form-label"},"Name & Address",-1),Us={class:"row g-2 mb-3"},Vs=s("h6",null,"Invoice",-1),As=s("hr",null,null,-1),Cs={class:"col-md-3"},Is=s("label",{for:"input13",class:"form-label"},"Carrier",-1),Ts={class:"col-md-3"},Ss=s("label",{for:"input13",class:"form-label"},"MAWB No",-1),$s={class:"col-md-3"},Ns=s("label",{for:"input13",class:"form-label"},"Port of Departure",-1),ks={class:"col-md-3"},qs=s("label",{for:"input13",class:"form-label"},"Port of Landing",-1),Ks={class:"col-md-3"},Ls=s("label",{for:"input13",class:"form-label"},"Quantity",-1),Ms={class:"col-md-3"},Ps=s("label",{for:"input13",class:"form-label"},"Weight",-1),Rs={class:"col-md-3"},Bs=s("label",{for:"input13",class:"form-label"},"Commodity",-1),Es=s("i",{class:"bx bx-plus"},null,-1),Fs=s("th",{class:"text-left",colspan:"3"},"PARTICULARS",-1),Os=s("th",{class:"text-left"},"UNIT PRICE",-1),Ds=s("th",{class:"text-left"},"QUANTITY",-1),js=s("th",{class:"text-left"},"TOTAL",-1),Gs={class:"no"},Qs=["onClick"],Ws=s("i",{class:"bx bxs-trash"},null,-1),Js=[Ws],Xs={class:"text-left",colspan:"3"},Ys=["onUpdate:modelValue"],zs={class:"text-left"},Hs=["onUpdate:modelValue","onKeyup"],Zs={class:"text-left"},se=["onUpdate:modelValue","onKeyup"],ee={class:"total"},te=s("td",{colspan:"4"},null,-1),oe=s("td",{colspan:"2"},"SUBTOTAL",-1),le=s("td",{colspan:"4"},null,-1),ne=s("td",{colspan:"2"},"GRAND TOTAL",-1),ae={class:"card-footer"},re={class:"flex items-center gap-2 mt-2"},he={__name:"CreateInvoice",props:{invoice:Object,contact:Object,shippers:Array,consignees:Array,companies:Array,roles:Array,edit_mode:Boolean},setup(b){const K=$(!1),l=N().props.invoice,v=N().props.edit_mode,e=k({invoice_id:l==null?void 0:l.id,company_id:l==null?void 0:l.company_id,shipper_id:l==null?void 0:l.shipper_id,shipper_address:l==null?void 0:l.shipper_address,consignee_id:l==null?void 0:l.consignee_id,consignee_address:l==null?void 0:l.consignee_address,carrier:l==null?void 0:l.carrier,mawb_no:l==null?void 0:l.mawb_no,commodity:l==null?void 0:l.commodity,quantity:l==null?void 0:l.quantity,weight:l==null?void 0:l.weight,sender:l==null?void 0:l.sender,destination:l==null?void 0:l.destination,subtotal:0,total:0,items:l==null?void 0:l.items}),L=()=>{e.items.push({particular:"",amount:0,qty:1,total:0})},M=()=>{v?e.post(route("invoice.update"),{preserveScroll:!0,onSuccess:()=>C(),onError:()=>A(),onFinish:()=>{}}):e.post(route("invoice.store"),{preserveScroll:!0,onSuccess:()=>C(),onError:()=>A(),onFinish:()=>{}})},A=()=>{},C=()=>{K.value=!1,e.reset()},P=i=>{e.items.splice(i,1),w()},w=()=>{e.subtotal=0,e.items.forEach(i=>{e.subtotal+=parseFloat(i.total)}),e.total=e.subtotal},I=i=>{const n=e.items[i],t=n.qty*n.amount;n.total=t,w()},U=i=>{var n=0;i=="shipper"&&(n=e.shipper_id),i=="consignee"&&(n=e.consignee_id),k({id:n}).post(route("user.fetch"),{preserveScroll:!0,onSuccess:_=>{console.log(_);var r=_.props.contact,S=r.name+`
`+r.address_1+", "+r.address_2+`
`+r.city+", "+r.state+", "+r.country;i=="shipper"&&(e.shipper_address=S),i=="consignee"&&(e.consignee_address=S)},onError:_=>{console.log(_)},onFinish:()=>{}})},T=$(null);return R(()=>{v||(e.items=[{particular:"",amount:0,qty:1,total:0}]),v&&w()}),(i,n)=>(f(),p(g,null,[a(o(B),{title:"Invoices"}),a(O,null,{default:y(()=>[s("div",G,[s("div",Q,[W,s("div",J,[s("form",{onSubmit:n[16]||(n[16]=E(t=>M(),["prevent"]))},[s("div",X,[s("div",Y,[s("div",z,[s("div",H,[Z,ss,s("div",es,[s("div",ts,[os,d(s("select",{class:"form-control","onUpdate:modelValue":n[0]||(n[0]=t=>o(e).company_id=t),onChange:n[1]||(n[1]=t=>U("company"))},[(f(!0),p(g,null,x(b.companies,t=>(f(),p("option",{key:t.id,value:t.id},m(t.id)+" - "+m(t.name),9,ls))),128))],544),[[V,o(e).company_id]]),a(u,{message:o(e).errors.company_id},null,8,["message"])])])]),s("div",ns,[as,rs,s("div",ds,[s("div",is,[s("label",cs,[h("Account Number "),a(q,{roles:b.roles,ref_key:"create_edit_ref",ref:T},null,8,["roles"])]),d(s("select",{class:"form-control","onUpdate:modelValue":n[2]||(n[2]=t=>o(e).shipper_id=t),onChange:n[3]||(n[3]=t=>U("shipper"))},[(f(!0),p(g,null,x(b.shippers,t=>(f(),p("option",{key:t.id,value:t.id},m(t.id)+" - "+m(t.name),9,us))),128))],544),[[V,o(e).shipper_id]]),a(u,{message:o(e).errors.shipper_id},null,8,["message"])]),s("div",ms,[_s,d(s("textarea",{class:"form-control","onUpdate:modelValue":n[4]||(n[4]=t=>o(e).shipper_address=t),rows:"3",disabled:""},null,512),[[c,o(e).shipper_address]]),a(u,{message:o(e).errors.shipper_address},null,8,["message"])])])]),s("div",ps,[fs,hs,s("div",bs,[s("div",gs,[s("label",vs,[h("Account Number "),a(q,{roles:b.roles,ref_key:"create_edit_ref",ref:T},null,8,["roles"])]),d(s("select",{class:"form-control","onUpdate:modelValue":n[5]||(n[5]=t=>o(e).consignee_id=t),onChange:n[6]||(n[6]=t=>U("consignee"))},[(f(!0),p(g,null,x(b.consignees,t=>(f(),p("option",{key:t.id,value:t.id},m(t.id)+" - "+m(t.name),9,ys))),128))],544),[[V,o(e).consignee_id]]),a(u,{message:o(e).errors.consignee_id},null,8,["message"])]),s("div",xs,[ws,d(s("textarea",{class:"form-control","onUpdate:modelValue":n[7]||(n[7]=t=>o(e).consignee_address=t),rows:"3",disabled:""},null,512),[[c,o(e).consignee_address]]),a(u,{message:o(e).errors.consignee_address},null,8,["message"])])])])]),s("div",Us,[Vs,As,s("div",Cs,[Is,d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[8]||(n[8]=t=>o(e).carrier=t)},null,512),[[c,o(e).carrier]]),a(u,{message:o(e).errors.carrier},null,8,["message"])]),s("div",Ts,[Ss,d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[9]||(n[9]=t=>o(e).mawb_no=t)},null,512),[[c,o(e).mawb_no]]),a(u,{message:o(e).errors.mawb_no},null,8,["message"])]),s("div",$s,[Ns,d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[10]||(n[10]=t=>o(e).sender=t)},null,512),[[c,o(e).sender]]),a(u,{message:o(e).errors.sender},null,8,["message"])]),s("div",ks,[qs,d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[11]||(n[11]=t=>o(e).destination=t)},null,512),[[c,o(e).destination]]),a(u,{message:o(e).errors.destination},null,8,["message"])]),s("div",Ks,[Ls,d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[12]||(n[12]=t=>o(e).quantity=t)},null,512),[[c,o(e).quantity]]),a(u,{message:o(e).errors.quantity},null,8,["message"])]),s("div",Ms,[Ps,d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[13]||(n[13]=t=>o(e).weight=t)},null,512),[[c,o(e).weight]]),a(u,{message:o(e).errors.weight},null,8,["message"])]),s("div",Rs,[Bs,d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[14]||(n[14]=t=>o(e).commodity=t)},null,512),[[c,o(e).commodity]]),a(u,{message:o(e).errors.commodity},null,8,["message"])])]),s("table",null,[s("thead",null,[s("tr",null,[s("th",null,[s("button",{type:"button",onClick:n[15]||(n[15]=t=>L()),class:"ms-1 text-sucess btn btn-success btn-sm"},[Es,h("Add Item")])]),Fs,Os,Ds,js])]),s("tbody",null,[(f(!0),p(g,null,x(o(e).items,(t,_)=>(f(),p("tr",{key:t.id},[s("td",Gs,[s("span",null,[h(" Item #"+m(_)+" ",1),s("button",{type:"button",onClick:r=>P(_),class:"ms-1 text-danger"},Js,8,Qs)])]),s("td",Xs,[d(s("input",{type:"text",class:"form-control","onUpdate:modelValue":r=>t.particular=r},null,8,Ys),[[c,t.particular]])]),s("td",zs,[d(s("input",{type:"number",class:"form-control","onUpdate:modelValue":r=>t.amount=r,onKeyup:r=>I(_)},null,40,Hs),[[c,t.amount]])]),s("td",Zs,[d(s("input",{type:"number",class:"form-control","onUpdate:modelValue":r=>t.qty=r,onKeyup:r=>I(_)},null,40,se),[[c,t.qty]])]),s("td",ee,"PKR "+m(t.total),1)]))),128))]),s("tfoot",null,[s("tr",null,[te,oe,s("td",null,"PKR "+m(o(e).subtotal),1)]),s("tr",null,[le,ne,s("td",null,"PKR "+m(o(e).total),1)])])])])]),s("div",ae,[s("div",re,[a(D,{disabled:o(e).processing},{default:y(()=>[h(m(o(v)?"Update":"Save"),1)]),_:1},8,["disabled"]),a(o(F),{href:i.route("invoice.index")},{default:y(()=>[a(j,{disabled:o(e).processing},{default:y(()=>[h(" Cancel ")]),_:1},8,["disabled"])]),_:1},8,["href"])])])],32)])])])]),_:1})],64))}};export{he as default};
