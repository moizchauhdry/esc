import{m as x,v as T,f as b,b as s,d as f,e as I,i as a,s as d,u as e,a as r,F,q,t as u,g as L,o as h}from"./app-b82a8816.js";import{_ as i}from"./InputError-5c9772d1.js";const M={class:"col"},B=s("i",{class:"bx bx-plus"},null,-1),D={key:0,class:"modal fade show",id:"exampleLargeModal",tabindex:"-1","aria-hidden":"true",style:{display:"block"}},R={class:"modal-dialog modal-xl"},$={class:"modal-content"},O=s("h5",{class:"modal-title"},"Invoice Add",-1),E={class:"modal-body"},K={class:""},P={class:"card-body"},G={class:"invoice overflow-auto"},W={class:"row mb-3"},j={class:"col-md-4"},Q=s("h6",null,"Shipper",-1),z=s("hr",null,null,-1),H={class:"row g-2"},J={class:"col-md-12"},X=s("label",{for:"input13",class:"form-label"},"Account Number",-1),Y={class:"col-md-12"},Z=s("label",{for:"input11",class:"form-label"},"Name & Address",-1),ss={class:"col-md-4"},ts=s("h6",null,"Consignee",-1),es=s("hr",null,null,-1),os={class:"row g-2"},ls={class:"col-md-12"},ns=s("label",{for:"input13",class:"form-label"},"Account Number",-1),as={class:"col-md-12"},ds=s("label",{for:"input13",class:"form-label"},"Name & Address",-1),rs={class:"col-md-4"},is=s("h6",null,"Sender/Destination",-1),cs=s("hr",null,null,-1),us={class:"row g-2"},_s={class:"col-md-12"},ms=s("label",{for:"input13",class:"form-label"},"Sender",-1),ps={class:"col-md-12"},bs=s("label",{for:"input13",class:"form-label"},"Destination",-1),hs={class:"row g-2 mb-3"},fs=s("h6",null,"Invoice",-1),gs=s("hr",null,null,-1),ys={class:"col-md-4"},vs=s("label",{for:"input13",class:"form-label"},"Carrier",-1),xs={class:"col-md-4"},ws=s("label",{for:"input13",class:"form-label"},"MAWB No",-1),Us={class:"col-md-4"},Vs=s("label",{for:"input13",class:"form-label"},"Quantity",-1),As={class:"col-md-4"},Cs=s("label",{for:"input13",class:"form-label"},"Weight",-1),Ss={class:"col-md-4"},Ns=s("label",{for:"input13",class:"form-label"},"Commodity",-1),ks={class:"col-md-4"},Ts=s("label",{for:"input13",class:"form-label"},"AFC Rate",-1),Is={class:"col-md-4"},Fs=s("label",{for:"input13",class:"form-label"},"Consignment No",-1),qs={class:"col-md-4"},Ls=s("label",{for:"input13",class:"form-label"},"Airport of Departure",-1),Ms={class:"col-md-4"},Bs=s("label",{for:"input13",class:"form-label"},"Issued By",-1),Ds=s("i",{class:"bx bx-plus"},null,-1),Rs=s("th",{class:"text-left",colspan:"3"}," PARTICULARS ",-1),$s=s("th",{class:"text-left"},"AMOUNT",-1),Os=s("th",{class:"text-left"},"TOTAL",-1),Es={class:"no"},Ks=["onClick"],Ps=s("i",{class:"bx bxs-trash"},null,-1),Gs=[Ps],Ws={class:"text-left",colspan:"3"},js=["onUpdate:modelValue"],Qs={class:"text-left"},zs=["onUpdate:modelValue"],Hs={class:"total"},Js=s("td",{colspan:"3"},null,-1),Xs=s("td",{colspan:"2"},"SUBTOTAL",-1),Ys=s("td",{colspan:"3"},null,-1),Zs=s("td",{colspan:"2"},"GRAND TOTAL",-1),st={class:"modal-footer"},tt={type:"submit",class:"btn btn-primary btn-sm"},nt={__name:"Create",props:{invoices:Object},setup(et,{expose:w}){const _=x(!1),m=x(!1),t=T({invoice_id:"",shipper_id:"",shipper_account:"",shipper_address:"",consignee_id:"",consignee_account:"",consignee_address:"",carrier:"",mawb_no:"",quantity:"",weight:"",commodity:"",afc_rate:"",sender:"",destination:"",consignment_no:"",departure_airport:"",issued_by:"",created_by:"",total:0,subtotal:0,items:[]}),g=()=>{t.items.push({particular:"",amount:0})},U=()=>{_.value=!0,m.value=!1,g()},V=()=>{t.post(route("invoice.create"),{preserveScroll:!0,onSuccess:()=>p(),onError:()=>y(),onFinish:()=>{}})},A=n=>{_.value=!0,m.value=!0,t.invoice_id=n.id,t.shipper_id=n.shipper_id,t.shipper_account=n.shipper_account,t.shipper_address=n.shipper_address,t.consignee_id=n.consignee_id,t.consignee_account=n.consignee_account,t.consignee_address=n.consignee_address,t.carrier=n.carrier,t.mawb_no=n.mawb_no,t.quantity=n.quantity,t.weight=n.weight,t.commodity=n.commodity,t.afc_rate=n.afc_rate,t.sender=n.sender,t.destination=n.destination,t.consignment_no=n.consignment_no,t.departure_airport=n.departure_airport,t.issued_by=n.issued_by,t.created_by=n.created_by,t.items=n.items},C=()=>{t.post(route("invoice.update"),{preserveScroll:!0,onSuccess:()=>p(),onError:()=>y(),onFinish:()=>{}})},y=()=>{},p=()=>{_.value=!1,t.reset()},S=n=>{t.items.splice(n,1),v()},v=()=>{t.subtotal=0,t.items.forEach(n=>{t.subtotal+=parseFloat(n.amount)}),t.total=t.subtotal};return w({edit:n=>A(n)}),(n,l)=>(h(),b("div",M,[s("button",{type:"button",class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleLargeModal",onClick:U},[B,f("Add Invoice")]),_.value?(h(),b("div",D,[s("div",R,[s("div",$,[s("form",{onSubmit:l[17]||(l[17]=I(o=>m.value?C():V(),["prevent"]))},[s("div",{class:"modal-header"},[O,s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:p})]),s("div",E,[s("div",K,[s("div",P,[s("div",G,[s("div",null,[s("div",W,[s("div",j,[Q,z,s("div",H,[s("div",J,[X,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=o=>e(t).shipper_account=o)},null,512),[[d,e(t).shipper_account]]),r(i,{message:e(t).errors.shipper_account},null,8,["message"])]),s("div",Y,[Z,a(s("textarea",{class:"form-control","onUpdate:modelValue":l[1]||(l[1]=o=>e(t).shipper_address=o),rows:"3"},null,512),[[d,e(t).shipper_address]]),r(i,{message:e(t).errors.shipper_address},null,8,["message"])])])]),s("div",ss,[ts,es,s("div",os,[s("div",ls,[ns,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[2]||(l[2]=o=>e(t).consignee_account=o)},null,512),[[d,e(t).consignee_account]]),r(i,{message:e(t).errors.consignee_account},null,8,["message"])]),s("div",as,[ds,a(s("textarea",{class:"form-control","onUpdate:modelValue":l[3]||(l[3]=o=>e(t).consignee_address=o),rows:"3"},null,512),[[d,e(t).consignee_address]]),r(i,{message:e(t).errors.consignee_address},null,8,["message"])])])]),s("div",rs,[is,cs,s("div",us,[s("div",_s,[ms,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[4]||(l[4]=o=>e(t).sender=o)},null,512),[[d,e(t).sender]]),r(i,{message:e(t).errors.sender},null,8,["message"])]),s("div",ps,[bs,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[5]||(l[5]=o=>e(t).destination=o)},null,512),[[d,e(t).destination]]),r(i,{message:e(t).errors.destination},null,8,["message"])])])])]),s("div",hs,[fs,gs,s("div",ys,[vs,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[6]||(l[6]=o=>e(t).carrier=o)},null,512),[[d,e(t).carrier]]),r(i,{message:e(t).errors.carrier},null,8,["message"])]),s("div",xs,[ws,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[7]||(l[7]=o=>e(t).mawb_no=o)},null,512),[[d,e(t).mawb_no]]),r(i,{message:e(t).errors.mawb_no},null,8,["message"])]),s("div",Us,[Vs,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[8]||(l[8]=o=>e(t).quantity=o)},null,512),[[d,e(t).quantity]]),r(i,{message:e(t).errors.quantity},null,8,["message"])]),s("div",As,[Cs,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[9]||(l[9]=o=>e(t).weight=o)},null,512),[[d,e(t).weight]]),r(i,{message:e(t).errors.weight},null,8,["message"])]),s("div",Ss,[Ns,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[10]||(l[10]=o=>e(t).commodity=o)},null,512),[[d,e(t).commodity]]),r(i,{message:e(t).errors.commodity},null,8,["message"])]),s("div",ks,[Ts,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[11]||(l[11]=o=>e(t).afc_rate=o)},null,512),[[d,e(t).afc_rate]]),r(i,{message:e(t).errors.afc_rate},null,8,["message"])]),s("div",Is,[Fs,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[12]||(l[12]=o=>e(t).consignment_no=o)},null,512),[[d,e(t).consignment_no]]),r(i,{message:e(t).errors.consignment_no},null,8,["message"])]),s("div",qs,[Ls,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[13]||(l[13]=o=>e(t).departure_airport=o)},null,512),[[d,e(t).departure_airport]]),r(i,{message:e(t).errors.departure_airport},null,8,["message"])]),s("div",Ms,[Bs,a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":l[14]||(l[14]=o=>e(t).issued_by=o)},null,512),[[d,e(t).issued_by]]),r(i,{message:e(t).errors.issued_by},null,8,["message"])])]),s("table",null,[s("thead",null,[s("tr",null,[s("th",null,[s("button",{type:"button",onClick:l[15]||(l[15]=o=>g()),class:"ms-1 text-sucess btn btn-success btn-sm"},[Ds,f("Add Item")])]),Rs,$s,Os])]),s("tbody",null,[(h(!0),b(F,null,q(e(t).items,(o,N,k)=>(h(),b("tr",{key:o.id},[s("td",Es,[s("span",null,[f(" Item #"+u(++N)+" ",1),s("button",{type:"button",onClick:c=>S(k),class:"ms-1 text-danger"},Gs,8,Ks)])]),s("td",Ws,[a(s("input",{type:"text",class:"form-control","onUpdate:modelValue":c=>o.particular=c},null,8,js),[[d,o.particular]])]),s("td",Qs,[a(s("input",{type:"number",class:"form-control","onUpdate:modelValue":c=>o.amount=c,onKeyup:l[16]||(l[16]=c=>v())},null,40,zs),[[d,o.amount]])]),s("td",Hs,"$"+u(o.amount),1)]))),128))]),s("tfoot",null,[s("tr",null,[Js,Xs,s("td",null,"PKR "+u(e(t).total.toFixed(2)),1)]),s("tr",null,[Ys,Zs,s("td",null,"PKR "+u(e(t).total.toFixed(2)),1)])])])])])])])]),s("div",st,[s("button",{type:"button",class:"btn btn-secondary btn-sm","data-bs-dismiss":"modal",onClick:p},"Close"),s("button",tt,u(m.value?"Save & Update":"Save & Submit"),1)])],32)])])])):L("",!0)]))}};export{nt as default};
