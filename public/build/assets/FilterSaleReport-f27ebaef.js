import{p as b,J as x,v as N,x as U,f as n,a as r,w as m,F as v,o as d,d as g,b as t,i as c,q as C,u as o,z as D,t as w,s as $,n as Y,e as A}from"./app-bc0759de.js";import{_ as B,a as J}from"./SecondaryButton-faf9af64.js";import{_ as R}from"./PrimaryButton-fa410988.js";import{_ as T}from"./SuccessButton-83994697.js";import{_}from"./InputLabel-19a7f03d.js";import{_ as f}from"./InputError-2f431b86.js";import"./main-fb6e7d9c.js";import{h as q}from"./moment-a9aaa855.js";const z={class:"p-6"},E=t("h2",{class:"text-lg font-medium text-gray-900"},"Search Report",-1),I=t("hr",null,null,-1),L={class:"mt-6"},O={class:"row g-2"},P={class:"col-md-6"},j=t("option",{value:""},"All Companies",-1),W=["value"],G={class:"col-md-6"},H=t("option",{value:""},"All Carriers",-1),K=["value"],Q={class:"col-md-4"},X={class:"col-md-4"},Z={class:"mt-6 flex justify-end"},de={__name:"FilterSaleReport",props:{companies:Array},setup(ee){const p=b(!1),h=b(!1),V=x().props.carriers,F=x().props.companies;var l="";const e=N({company_id:"",carrier_id:"",from_date:"",to_date:""}),M=()=>{p.value=!0,h.value=!1,l=localStorage.getItem("filters"),l&&(l=JSON.parse(l),e.company_id=l.company_id,e.carrier_id=l.carrier_id,e.from_date=l.from_date,e.to_date=l.to_date)},k=()=>{var i={company_id:e.company_id,carrier_id:e.carrier_id,from_date:e.from_date,to_date:e.to_date};const a=new URLSearchParams(i).toString(),s=`${route("report.sale.index")}?${a}`;e.post(s,{preserveScroll:!0,onSuccess:S=>{u(),localStorage.setItem("filters",JSON.stringify(i))},onError:S=>{console.log(S)},onFinish:()=>{}})},u=()=>{p.value=!1,e.reset()},y=i=>q(i).format("YYYY-MM-DD");return U(()=>{e.from_date&&(e.from_date=y(e.from_date)),e.to_date&&(e.to_date=y(e.to_date))}),(i,a)=>(d(),n(v,null,[r(R,{onClick:M,type:"button",class:"mx-1"},{default:m(()=>[g("Search")]),_:1}),r(B,{show:p.value,onClose:u},{default:m(()=>[t("form",{onSubmit:a[4]||(a[4]=A(s=>h.value?i.update():k(),["prevent"]))},[t("div",z,[E,I,t("div",L,[t("div",O,[t("div",P,[r(_,{for:"",value:"Companies",class:"mb-1"}),c(t("select",{"onUpdate:modelValue":a[0]||(a[0]=s=>o(e).company_id=s),class:"form-control"},[j,(d(!0),n(v,null,D(o(F),s=>(d(),n("option",{value:s.id},w(s.name),9,W))),256))],512),[[C,o(e).company_id]]),r(f,{message:o(e).errors.company_id},null,8,["message"])]),t("div",G,[r(_,{for:"",value:"Carrier",class:"mb-1"}),c(t("select",{"onUpdate:modelValue":a[1]||(a[1]=s=>o(e).carrier_id=s),class:"form-control"},[H,(d(!0),n(v,null,D(o(V),s=>(d(),n("option",{value:s.value},w(s.label),9,K))),256))],512),[[C,o(e).carrier_id]]),r(f,{message:o(e).errors.carrier_id},null,8,["message"])]),t("div",Q,[r(_,{for:"",value:"From Date",class:"mb-1"}),c(t("input",{type:"date",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=s=>o(e).from_date=s)},null,512),[[$,o(e).from_date]]),r(f,{message:o(e).errors.from_date},null,8,["message"])]),t("div",X,[r(_,{for:"",value:"To Date",class:"mb-1"}),c(t("input",{type:"date",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=s=>o(e).to_date=s)},null,512),[[$,o(e).to_date]]),r(f,{message:o(e).errors.to_date},null,8,["message"])])])]),t("div",Z,[r(J,{onClick:u},{default:m(()=>[g(" Cancel ")]),_:1}),r(T,{class:Y(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing},{default:m(()=>[g(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{de as default};
