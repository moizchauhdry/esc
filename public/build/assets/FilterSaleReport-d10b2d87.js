import{p as b,J as C,v as N,B as U,f as n,a as r,w as m,F as v,o as d,d as g,b as t,i as c,A as D,u as o,y as w,t as x,z as $,n as A,e as B}from"./app-b9ce0331.js";import{_ as Y,a as J}from"./SecondaryButton-5f79f9ed.js";import{_ as R}from"./PrimaryButton-3ed4b619.js";import{_ as T}from"./SuccessButton-a2bae6d0.js";import{_}from"./InputLabel-94bb4420.js";import{_ as f}from"./InputError-aa9b4c18.js";import"./main-42bfd5aa.js";import{h as z}from"./moment-a9aaa855.js";const E={class:"p-6"},I=t("h2",{class:"text-lg font-medium text-gray-900"},"Search Report",-1),L=t("hr",null,null,-1),O={class:"mt-6"},P={class:"row g-2"},j={class:"col-md-6"},q=t("option",{value:""},"All Companies",-1),W=["value"],G={class:"col-md-6"},H=t("option",{value:""},"All Carriers",-1),K=["value"],Q={class:"col-md-4"},X={class:"col-md-4"},Z={class:"mt-6 flex justify-end"},de={__name:"FilterSaleReport",props:{companies:Array},setup(ee){const p=b(!1),h=b(!1),V=C().props.carriers,F=C().props.companies;var l="";const e=N({company_id:"",carrier_id:"",from_date:"",to_date:""}),M=()=>{p.value=!0,h.value=!1,l=localStorage.getItem("filters"),l&&(l=JSON.parse(l),e.company_id=l.company_id,e.carrier_id=l.carrier_id,e.from_date=l.from_date,e.to_date=l.to_date)},k=()=>{var i={company_id:e.company_id,carrier_id:e.carrier_id,from_date:e.from_date,to_date:e.to_date};const a=new URLSearchParams(i).toString(),s=`${route("report.sale.index")}?${a}`;e.post(s,{preserveScroll:!0,onSuccess:S=>{u(),localStorage.setItem("filters",JSON.stringify(i))},onError:S=>{console.log(S)},onFinish:()=>{}})},u=()=>{p.value=!1,e.reset()},y=i=>z(i).format("YYYY-MM-DD");return U(()=>{e.from_date&&(e.from_date=y(e.from_date)),e.to_date&&(e.to_date=y(e.to_date))}),(i,a)=>(d(),n(v,null,[r(R,{onClick:M,type:"button",class:"mx-1"},{default:m(()=>[g("Search")]),_:1}),r(Y,{show:p.value,onClose:u},{default:m(()=>[t("form",{onSubmit:a[4]||(a[4]=B(s=>h.value?i.update():k(),["prevent"]))},[t("div",E,[I,L,t("div",O,[t("div",P,[t("div",j,[r(_,{for:"",value:"Companies",class:"mb-1"}),c(t("select",{"onUpdate:modelValue":a[0]||(a[0]=s=>o(e).company_id=s),class:"form-control"},[q,(d(!0),n(v,null,w(o(F),s=>(d(),n("option",{value:s.id},x(s.name),9,W))),256))],512),[[D,o(e).company_id]]),r(f,{message:o(e).errors.company_id},null,8,["message"])]),t("div",G,[r(_,{for:"",value:"Carrier",class:"mb-1"}),c(t("select",{"onUpdate:modelValue":a[1]||(a[1]=s=>o(e).carrier_id=s),class:"form-control"},[H,(d(!0),n(v,null,w(o(V),s=>(d(),n("option",{value:s.value},x(s.label),9,K))),256))],512),[[D,o(e).carrier_id]]),r(f,{message:o(e).errors.carrier_id},null,8,["message"])]),t("div",Q,[r(_,{for:"",value:"From Date",class:"mb-1"}),c(t("input",{type:"date",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=s=>o(e).from_date=s)},null,512),[[$,o(e).from_date]]),r(f,{message:o(e).errors.from_date},null,8,["message"])]),t("div",X,[r(_,{for:"",value:"To Date",class:"mb-1"}),c(t("input",{type:"date",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=s=>o(e).to_date=s)},null,512),[[$,o(e).to_date]]),r(f,{message:o(e).errors.to_date},null,8,["message"])])])]),t("div",Z,[r(J,{onClick:u},{default:m(()=>[g(" Cancel ")]),_:1}),r(T,{class:A(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing},{default:m(()=>[g(" Search ")]),_:1},8,["class","disabled"])])])],32)]),_:1},8,["show"])],64))}};export{de as default};
