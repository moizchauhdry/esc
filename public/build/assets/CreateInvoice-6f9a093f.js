import{m as R,J as N,v as $,p as B,f as p,a,u as l,w as y,F as b,o as f,X as E,b as s,e as F,d as h,i as r,q as V,s as v,x as i,t as m,l as L}from"./app-be06a031.js";import{_ as O}from"./AuthenticatedLayout-e8ec3450.js";import{_ as c}from"./InputError-5ebba4f8.js";import{_ as P}from"./PrimaryButton-2b16808e.js";import{_ as D}from"./DangerButton-e9be1b2e.js";import A from"./Address-2e3ae1cb.js";import"./SecondaryButton-7a636b4e.js";const j={class:"page-wrapper"},G={class:"page-content"},Q=s("div",{class:"page-breadcrumb d-none d-sm-flex align-items-center mb-3"},[s("div",{class:"breadcrumb-title pe-3"},"Invoice Management"),s("div",{class:"ps-3"},[s("nav",{"aria-label":"breadcrumb"},[s("ol",{class:"breadcrumb mb-0 p-0"},[s("li",{class:"breadcrumb-item"},[s("a",{href:"javascript:;"},[s("i",{class:"bx bx-home-alt"})])]),s("li",{class:"breadcrumb-item active","aria-current":"page"},"Invoice Create")])])]),s("div",{class:"ms-auto"})],-1),W={class:"card"},J={class:"card-body"},X={class:"invoice overflow-auto"},Y={class:"row mb-3"},z={class:"col-md-4"},H=s("h6",null,"Company ",-1),Z=s("hr",null,null,-1),ss={class:"row g-2"},es={class:"col-md-12"},ts={for:"input13",class:"form-label"},os=["value"],ls={class:"col-md-12"},ns=s("label",{for:"input11",class:"form-label"},"Name & Address",-1),as={class:"col-md-4"},ds=s("h6",null,"Shipper ",-1),rs=s("hr",null,null,-1),is={class:"row g-2"},cs={class:"col-md-12"},ms={for:"input13",class:"form-label"},us=["value"],_s={class:"col-md-12"},ps=s("label",{for:"input11",class:"form-label"},"Name & Address",-1),fs={class:"col-md-4"},hs=s("h6",null,"Consignee ",-1),bs=s("hr",null,null,-1),gs={class:"row g-2"},ys={class:"col-md-12"},vs={for:"input13",class:"form-label"},xs=["value"],ws={class:"col-md-12"},Us=s("label",{for:"input13",class:"form-label"},"Name & Address",-1),Vs={class:"row g-2 mb-3"},As=s("h6",null,"Invoice",-1),Cs=s("hr",null,null,-1),Is={class:"col-md-3"},Ss=s("label",{for:"input13",class:"form-label"},"Carrier",-1),Ts={class:"col-md-3"},Ns=s("label",{for:"input13",class:"form-label"},"MAWB No",-1),$s={class:"col-md-3"},qs=s("label",{for:"input13",class:"form-label"},"Sender",-1),ks={class:"col-md-3"},Ks=s("label",{for:"input13",class:"form-label"},"Destination",-1),Ms={class:"col-md-3"},Rs=s("label",{for:"input13",class:"form-label"},"Quantity",-1),Bs={class:"col-md-3"},Es=s("label",{for:"input13",class:"form-label"},"Weight",-1),Fs={class:"col-md-3"},Ls=s("label",{for:"input13",class:"form-label"},"Commodity",-1),Os=s("i",{class:"bx bx-plus"},null,-1),Ps=s("th",{class:"text-left",colspan:"3"},"PARTICULARS",-1),Ds=s("th",{class:"text-left"},"UNIT PRICE",-1),js=s("th",{class:"text-left"},"QUANTITY",-1),Gs=s("th",{class:"text-left"},"TOTAL",-1),Qs={class:"no"},Ws=["onClick"],Js=s("i",{class:"bx bxs-trash"},null,-1),Xs=[Js],Ys={class:"text-left",colspan:"3"},zs=["onUpdate:modelValue"],Hs={class:"text-left"},Zs=["onUpdate:modelValue","onKeyup"],se={class:"text-left"},ee=["onUpdate:modelValue","onKeyup"],te={class:"total"},oe=s("td",{colspan:"4"},null,-1),le=s("td",{colspan:"2"},"SUBTOTAL",-1),ne=s("td",{colspan:"4"},null,-1),ae=s("td",{colspan:"2"},"GRAND TOTAL",-1),de={class:"card-footer"},re={class:"flex items-center gap-2 mt-2"},he={__name:"CreateInvoice",props:{invoice:Object,address:Object,shippers:Array,consignees:Array,companies:Array,edit_mode:Boolean},setup(x){const q=R(!1),o=N().props.invoice,g=N().props.edit_mode,e=$({invoice_id:o==null?void 0:o.id,company_id:o==null?void 0:o.company_id,shipper_id:o==null?void 0:o.shipper_id,shipper_address:o==null?void 0:o.shipper_address,consignee_id:o==null?void 0:o.consignee_id,consignee_address:o==null?void 0:o.consignee_address,carrier:o==null?void 0:o.carrier,mawb_no:o==null?void 0:o.mawb_no,commodity:o==null?void 0:o.commodity,quantity:o==null?void 0:o.quantity,weight:o==null?void 0:o.weight,sender:o==null?void 0:o.sender,destination:o==null?void 0:o.destination,subtotal:o==null?void 0:o.total,total:o==null?void 0:o.total,items:o==null?void 0:o.items}),k=()=>{e.items.push({particular:"",amount:0,qty:1,subtotal:0})},K=()=>{g?e.post(route("invoice.update"),{preserveScroll:!0,onSuccess:()=>I(),onError:()=>C(),onFinish:()=>{}}):e.post(route("invoice.store"),{preserveScroll:!0,onSuccess:()=>I(),onError:()=>C(),onFinish:()=>{}})},C=()=>{},I=()=>{q.value=!1,e.reset()},M=u=>{e.items.splice(u,1),w()},w=()=>{e.subtotal=0,e.items.forEach(u=>{e.subtotal+=parseFloat(u.subtotal)}),e.total=e.subtotal},S=u=>{const n=e.items[u],t=n.qty*n.amount;n.subtotal=t,w()},U=u=>{var n=0;u=="shipper"&&(n=e.shipper_id),u=="consignee"&&(n=e.consignee_id),$({id:n}).post(route("address.fetch"),{preserveScroll:!0,onSuccess:_=>{var d=_.props.address;console.log(_);var T=d.name+`
`+d.address_1+", "+d.address_2+`
`+d.city+", "+d.state+", "+d.country;d.type=="shipper"&&(e.shipper_address=T),d.type=="consignee"&&(e.consignee_address=T)},onError:_=>{console.log(_)},onFinish:()=>{}})};return B(()=>{g||(e.items=[]),g&&w()}),(u,n)=>(f(),p(b,null,[a(l(E),{title:"Invoices"}),a(O,null,{default:y(()=>[s("div",j,[s("div",G,[Q,s("div",W,[s("form",{onSubmit:n[17]||(n[17]=F(t=>K(),["prevent"]))},[s("div",J,[s("div",X,[s("div",Y,[s("div",z,[H,Z,s("div",ss,[s("div",es,[s("label",ts,[h("Account Number "),a(A)]),r(s("select",{class:"form-control","onUpdate:modelValue":n[0]||(n[0]=t=>l(e).company_id=t),onChange:n[1]||(n[1]=t=>U("company"))},[(f(!0),p(b,null,v(x.companies,t=>(f(),p("option",{key:t.id,value:t.id},m(t.id)+" - "+m(t.name),9,os))),128))],544),[[V,l(e).company_id]]),a(c,{message:l(e).errors.company_id},null,8,["message"])]),s("div",ls,[ns,r(s("textarea",{class:"form-control","onUpdate:modelValue":n[2]||(n[2]=t=>l(e).company_address=t),rows:"3",disabled:""},null,512),[[i,l(e).company_address]]),a(c,{message:l(e).errors.company_address},null,8,["message"])])])]),s("div",as,[ds,rs,s("div",is,[s("div",cs,[s("label",ms,[h("Account Number "),a(A)]),r(s("select",{class:"form-control","onUpdate:modelValue":n[3]||(n[3]=t=>l(e).shipper_id=t),onChange:n[4]||(n[4]=t=>U("shipper"))},[(f(!0),p(b,null,v(x.shippers,t=>(f(),p("option",{key:t.id,value:t.id},m(t.id)+" - "+m(t.name),9,us))),128))],544),[[V,l(e).shipper_id]]),a(c,{message:l(e).errors.shipper_id},null,8,["message"])]),s("div",_s,[ps,r(s("textarea",{class:"form-control","onUpdate:modelValue":n[5]||(n[5]=t=>l(e).shipper_address=t),rows:"3",disabled:""},null,512),[[i,l(e).shipper_address]]),a(c,{message:l(e).errors.shipper_address},null,8,["message"])])])]),s("div",fs,[hs,bs,s("div",gs,[s("div",ys,[s("label",vs,[h("Account Number "),a(A)]),r(s("select",{class:"form-control","onUpdate:modelValue":n[6]||(n[6]=t=>l(e).consignee_id=t),onChange:n[7]||(n[7]=t=>U("consignee"))},[(f(!0),p(b,null,v(x.consignees,t=>(f(),p("option",{key:t.id,value:t.id},m(t.id)+" - "+m(t.name),9,xs))),128))],544),[[V,l(e).consignee_id]]),a(c,{message:l(e).errors.consignee_id},null,8,["message"])]),s("div",ws,[Us,r(s("textarea",{class:"form-control","onUpdate:modelValue":n[8]||(n[8]=t=>l(e).consignee_address=t),rows:"3",disabled:""},null,512),[[i,l(e).consignee_address]]),a(c,{message:l(e).errors.consignee_address},null,8,["message"])])])])]),s("div",Vs,[As,Cs,s("div",Is,[Ss,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[9]||(n[9]=t=>l(e).carrier=t)},null,512),[[i,l(e).carrier]]),a(c,{message:l(e).errors.carrier},null,8,["message"])]),s("div",Ts,[Ns,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[10]||(n[10]=t=>l(e).mawb_no=t)},null,512),[[i,l(e).mawb_no]]),a(c,{message:l(e).errors.mawb_no},null,8,["message"])]),s("div",$s,[qs,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[11]||(n[11]=t=>l(e).sender=t)},null,512),[[i,l(e).sender]]),a(c,{message:l(e).errors.sender},null,8,["message"])]),s("div",ks,[Ks,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[12]||(n[12]=t=>l(e).destination=t)},null,512),[[i,l(e).destination]]),a(c,{message:l(e).errors.destination},null,8,["message"])]),s("div",Ms,[Rs,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[13]||(n[13]=t=>l(e).quantity=t)},null,512),[[i,l(e).quantity]]),a(c,{message:l(e).errors.quantity},null,8,["message"])]),s("div",Bs,[Es,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[14]||(n[14]=t=>l(e).weight=t)},null,512),[[i,l(e).weight]]),a(c,{message:l(e).errors.weight},null,8,["message"])]),s("div",Fs,[Ls,r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":n[15]||(n[15]=t=>l(e).commodity=t)},null,512),[[i,l(e).commodity]]),a(c,{message:l(e).errors.commodity},null,8,["message"])])]),s("table",null,[s("thead",null,[s("tr",null,[s("th",null,[s("button",{type:"button",onClick:n[16]||(n[16]=t=>k()),class:"ms-1 text-sucess btn btn-success btn-sm"},[Os,h("Add Item")])]),Ps,Ds,js,Gs])]),s("tbody",null,[(f(!0),p(b,null,v(l(e).items,(t,_)=>(f(),p("tr",{key:t.id},[s("td",Qs,[s("span",null,[h(" Item #"+m(_)+" ",1),s("button",{type:"button",onClick:d=>M(_),class:"ms-1 text-danger"},Xs,8,Ws)])]),s("td",Ys,[r(s("input",{type:"text",class:"form-control","onUpdate:modelValue":d=>t.particular=d},null,8,zs),[[i,t.particular]])]),s("td",Hs,[r(s("input",{type:"number",class:"form-control","onUpdate:modelValue":d=>t.amount=d,onKeyup:d=>S(_)},null,40,Zs),[[i,t.amount]])]),s("td",se,[r(s("input",{type:"number",class:"form-control","onUpdate:modelValue":d=>t.qty=d,onKeyup:d=>S(_)},null,40,ee),[[i,t.qty]])]),s("td",te,"PKR "+m(t.subtotal),1)]))),128))]),s("tfoot",null,[s("tr",null,[oe,le,s("td",null,"PKR "+m(l(e).total),1)]),s("tr",null,[ne,ae,s("td",null,"PKR "+m(l(e).total),1)])])])])]),s("div",de,[s("div",re,[a(P,{disabled:l(e).processing},{default:y(()=>[h(m(l(g)?"Update":"Save"),1)]),_:1},8,["disabled"]),a(l(L),{href:u.route("invoice.index")},{default:y(()=>[a(D,{disabled:l(e).processing},{default:y(()=>[h(" Cancel ")]),_:1},8,["disabled"])]),_:1},8,["href"])])])],32)])])])]),_:1})],64))}};export{he as default};
